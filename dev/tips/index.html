<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance tips · NLPModelsIpopt.jl</title><meta name="title" content="Performance tips · NLPModelsIpopt.jl"/><meta property="og:title" content="Performance tips · NLPModelsIpopt.jl"/><meta property="twitter:title" content="Performance tips · NLPModelsIpopt.jl"/><meta name="description" content="Documentation for NLPModelsIpopt.jl."/><meta property="og:description" content="Documentation for NLPModelsIpopt.jl."/><meta property="twitter:description" content="Documentation for NLPModelsIpopt.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="NLPModelsIpopt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NLPModelsIpopt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Performance tips</a><ul class="internal"><li><a class="tocitem" href="#Linear-solvers"><span>Linear solvers</span></a></li><li><a class="tocitem" href="#BLAS-and-LAPACK"><span>BLAS and LAPACK</span></a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Performance tips</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Performance tips</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/NLPModelsIpopt.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/NLPModelsIpopt.jl/blob/main/docs/src/tips.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Linear-solvers"><a class="docs-heading-anchor" href="#Linear-solvers">Linear solvers</a><a id="Linear-solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-solvers" title="Permalink"></a></h2><p>To improve performance, Ipopt supports multiple linear solvers, the default one is <a href="https://mumps-solver.org/"><code>MUMPS</code></a> but you can modify the linear solver with the keyword argument <code>linear_solver</code>.</p><h3 id="HSL"><a class="docs-heading-anchor" href="#HSL">HSL</a><a id="HSL-1"></a><a class="docs-heading-anchor-permalink" href="#HSL" title="Permalink"></a></h3><p>Obtain a license and download <code>HSL_jll.jl</code> from <a href="https://licences.stfc.ac.uk/product/libhsl">https://licences.stfc.ac.uk/product/libhsl</a>.</p><p>There are two versions available: LBT and OpenBLAS. LBT is the recommended option for Julia ≥ v1.9.</p><p>Install this download into your current environment using:</p><pre><code class="language-julia hljs">import Pkg
Pkg.develop(path = &quot;/full/path/to/HSL_jll.jl&quot;)</code></pre><p>We provide an example with the linear solvers <code>MA27</code> and <code>MA57</code>:</p><pre><code class="language-julia hljs">using HSL_jll, NLPModelsIpopt
stats_ma27 = ipopt(nlp, linear_solver=&quot;ma27&quot;)
stats_ma57 = ipopt(nlp, linear_solver=&quot;ma57&quot;)</code></pre><h3 id="SPRAL"><a class="docs-heading-anchor" href="#SPRAL">SPRAL</a><a id="SPRAL-1"></a><a class="docs-heading-anchor-permalink" href="#SPRAL" title="Permalink"></a></h3><p>If you use NLPModelsIpopt.jl with Julia ≥ v1.9, the linear solver <a href="https://github.com/ralna/spral">SPRAL</a> is available. You can use it by setting the <code>linear_solver</code> attribute:</p><pre><code class="language-julia hljs">using NLPModelsIpopt
stats_spral = ipopt(nlp, linear_solver=&quot;spral&quot;)</code></pre><p>Note that the following environment variables must be set before starting Julia:</p><pre><code class="language-raw hljs">export OMP_CANCELLATION=TRUE
export OMP_PROC_BIND=TRUE</code></pre><h2 id="BLAS-and-LAPACK"><a class="docs-heading-anchor" href="#BLAS-and-LAPACK">BLAS and LAPACK</a><a id="BLAS-and-LAPACK-1"></a><a class="docs-heading-anchor-permalink" href="#BLAS-and-LAPACK" title="Permalink"></a></h2><p>With Julia v1.9 or later, Ipopt and the linear solvers <a href="https://mumps-solver.org/index.php">MUMPS</a> (default), <a href="https://github.com/ralna/spral">SPRAL</a>, and <a href="https://licences.stfc.ac.uk/product/julia-hsl">HSL</a> are compiled with <a href="https://github.com/JuliaLinearAlgebra/libblastrampoline"><code>libblastrampoline</code></a> (LBT), a library that can change between BLAS and LAPACK backends at runtime.</p><p>The default BLAS and LAPACK backend is <a href="https://github.com/OpenMathLib/OpenBLAS">OpenBLAS</a>.</p><p>Using LBT, we can also switch dynamically to other BLAS backends such as Intel MKL and Apple Accelerate. Because Ipopt and the linear solvers heavily rely on BLAS and LAPACK routines, using an optimized backend for a particular platform can improve the performance.</p><h3 id="MKL"><a class="docs-heading-anchor" href="#MKL">MKL</a><a id="MKL-1"></a><a class="docs-heading-anchor-permalink" href="#MKL" title="Permalink"></a></h3><p>If you have <a href="https://github.com/JuliaLinearAlgebra/MKL.jl">MKL.jl</a> installed, switch to MKL by adding <code>using MKL</code> to your code:</p><pre><code class="language-julia hljs">using MKL  # Replace OpenBLAS by Intel MKL
using NLPModelsIpopt</code></pre><h3 id="AppleAccelerate"><a class="docs-heading-anchor" href="#AppleAccelerate">AppleAccelerate</a><a id="AppleAccelerate-1"></a><a class="docs-heading-anchor-permalink" href="#AppleAccelerate" title="Permalink"></a></h3><p>If you are using macOS ≥ v13.4 and you have <a href="https://github.com/JuliaLinearAlgebra/AppleAccelerate.jl">AppleAccelerate.jl</a> installed, you can replace OpenBLAS as follows:</p><pre><code class="language-julia hljs">using AppleAccelerate  # Replace OpenBLAS by Apple Accelerate
using NLPModelsIpopt</code></pre><h3 id="Display-backends"><a class="docs-heading-anchor" href="#Display-backends">Display backends</a><a id="Display-backends-1"></a><a class="docs-heading-anchor-permalink" href="#Display-backends" title="Permalink"></a></h3><p>Check what backends are loaded using:</p><pre><code class="language-julia hljs">import LinearAlgebra
LinearAlgebra.BLAS.lbt_get_config()</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Saturday 2 November 2024 14:33">Saturday 2 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
